#关系模型之基本概念
##关系模型研究什么
 - 形象的说，一个关系就是一张表（table）
 - 关系模型就是处理各种表（table），其由三部分组成
  - 描述数据库的各种数据的基本结构形式（表／关系）
  - 描述表与表之间可能发生的可能发生的各种操作（关系运算）
  - 描述这些操作所应该遵循的约束条件（完整性约束）
  
##关系模型的三个要素：

 - 基本结构： 关系/table

 - 基本操作： 关系操作
  - 基本运算：  并（U）差（-）广义集（X）选择（选择指定的行），投影（选择指定的列）
  - 扩展运算：  交（）连接（） 除 
 - 完整性约束：

  - 实体完整性（关系中的主码中的属性值不能为空（对主码而言））
   - null值表示的是不知道 不存在或者无意义的值。
   - 数据库中有了空值，会影响多个方面，如影响聚集运算的正确性、不能参与算术、比较、或者逻辑运算。
  - 参照完整性（如果关系R1的外码Fk和R2的主码Pk相对应,则R1的每一个元组Fk值或者等于R2的某个主码值或者为空值。（对外码而言））
 - 用户自定义完整性（用户针对具体的应用环境定义的完整性约束条件。）  
 注：实体完整性、参照完整性由DBMS自动支持。

注：  
 
-   并相容性：参与运算的两个关系及其相关属性之间有一定的对应性 可比性 或者意义关联性

 - 定义：关系R与关系S存在相容性，当且仅当：

		(1) 关系R和关系S的属性数目必须相同；

		(2) 对于任意i，关系R的第i个属性的域必须和关系S的第i个属性的域相同

     假设：R(A1, A2, … , An) , S(B1, B2, … ,Bm)，R和S满足并相容性：n = m 并且Domain(Ai) = Domain(Bi)

注：条件的书写很重要，尤其是当不同运算符在一起的时候，要注意运算符的运算顺序。



 

## 自然连接
 - 由关系R和关系S中选取相同属性组上值相等的元祖所组成（特殊的等值连接）并且要除去重复列。

## 除操作
 - 前提：S是R的真子集 从R中除去S中包含的属性，并保留和S中元素都相同的行 去掉其他行。（不是很明白）

## 外链接
- 定义： 两个关系R与S进行连接时，如果关系R(或S)中的元组在S(或R)中找不到相匹配的元组，则为了避免该元组信息丢失，从而将该元组与S(或R)中假定存在的全为空值的元组形成连接，放置在结果关系中，这种连接称之为外连接(Outer Join)。 

- 左外连接：自然连接+左侧表中失配的元组（左边元组不丢失）

```sql
SELECT    e.ename,s.ename FROM emp e LEFT JOIN  emp s ON s.empno = e.mgr; 

--最大的老板没有项目经理 所以这一行失配 结果是用失配元组+空元组 左侧的s失配+右侧的空元组 因而使用的是左外连接
```

- 右外连接：自然连接+右侧表中失配的元组（右边元组不丢失）

## 关系代数、关系元组演算与关系域演算

 - 关系代数可以转为关系元组演算 但是关系元组演算转换为关系代数需要一定条件

 - 在一定条件下关系元组演算和关系域演算可以相互转换。

 - 关系代数与安全的元组演算表达式与安全的域演算表达式是等价的。即一种形式的表达式可以被等价地转换为另一种形式

 - 三种关系运算都可说是非过程性的。相比之下：域演算的非过程性最好，元组演算次之，关系代数最差

 - 三种关系运算虽是抽象的，但却是衡量数据库语言完备性的基础

 - 一个数据库语言如果能够等价地实现这三种关系运算的操作，则说该语言是完备的


- 目前多数数据库语言都能够实现这三种运算的操作，在此基础上还增加了许多其他的操作，如赋值操作、聚集操作等

- 关系运算的安全性：指的是“不产生无限关系和无穷验证的运算成为是安全的”

 - 关系代数是一种集合运算，有限集合的有限运算依旧是有限的。

 - 关系演算不一定是安全的

 - 正是因为关系演算不一定安全，因此我们需要对其进行约束。



 

 

 

